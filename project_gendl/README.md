Generating Data for gendl
=========================

Exon-intron-exon
----------------

The main data source is an exon-intron-exon file with the following
space-delimited line structure:

+ 50 nt of exon preceding an intron
+ The entire sequence of the intron (40-150 bp)
+ 50 nt of exon after the intron
+ RNA splice count
+ Source gene

If either exon is below 50, the exon-intron-exon is not reported. If the intron
is short (<40) or long-ish (>150) the exon-intron-exon is not reported.

Duplicate exon-intron-exons from alternative isoforms or closely related genes
are reported only once. In such a case, only one source gene name is given.


Build
-----

Building exon-intron-exon files for 3 genomes.

```
./gendl_build ../genome_athaliana/build/genes > eie.at.txt
./gendl_build ../genome_celegans/build/genes > eie.ce.txt
./gendl_build ../genome_dmelanogaster/build/genes > eie.dm.txt
gzip *.txt
```

The number of exon-intron-exon lines:

+ 62804 A. thaliana
+ 53515 C. elegans
+ 19886 D. melanogaster


Demo
----

In order to create test/training sets, you have to sample the various
exon-intron-exon files The `donors.py` program is an example of how to write
those scripts.


setbuilder.py
-------------

This currently creates the 42 bp set for 3 genomes. The old method was in the
`lyman-2020` repo, but that is sort of deprecated.

```
mkdir data42
python3 setbuilder.py
gzip data42/*
mv data42 ~/Code/genDL
```

+ `at.acc.fa.gz` contains A. thaliana acceptors
+ `at.n1acc.fa.gz` contains negative 1 acceptors
+ `at.n2acc.fa.gz` contains negative 2 acceptors
+ `at.n3acc.fa.gz` is of course negative 3 acceptors

The negative 1 model is just random ACGT.

The negative 2 model is compositional. Each side of the splice site is
randomized. Exons will look a little like exons and intons will look a little
like introns. Positional information (e.g. near donor/acceptor) is not
retained.

The negative 3 model is positional. That is, each position of the sequence is
generated by the average probability at that position. You can think of this as
a giant PWM.
